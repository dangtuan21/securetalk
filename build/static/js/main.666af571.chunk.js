(this.webpackJsonpsecuretalk=this.webpackJsonpsecuretalk||[]).push([[1],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){var c={"./pwa-action-sheet.entry.js":[154,60],"./pwa-camera-modal-instance.entry.js":[155,61],"./pwa-camera-modal.entry.js":[156,62],"./pwa-camera.entry.js":[157,63],"./pwa-toast.entry.js":[158,64]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=103,e.exports=r},104:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),s=n(37),a=n.n(s),i=n(17),o=n(34),j=n(3),u=Object(c.createContext)({}),l=null;try{var d;l=JSON.parse(null!==(d=localStorage.getItem("whatsapp-user"))&&void 0!==d?d:"")}catch(L){}var b={count:0,user:l,noTabs:!1,chattingWith:{}},h=function(e,t){switch(t.type){case"loadUser":return console.log("Mutation called"),localStorage.setItem("whatsapp-user",JSON.stringify(t.payload.user)),Object(o.a)(Object(o.a)({},e),{},{user:t.payload.user});case"setNoTabs":return Object(o.a)(Object(o.a)({},e),{},{noTabs:t.payload});case"setChattingWith":return Object(o.a)(Object(o.a)({},e),{},{chattingWith:t.payload});default:return Object(o.a)({},e)}},p=function(e){var t=Object(c.useReducer)(h,b),n=Object(i.a)(t,2),r={state:n[0],dispatch:n[1]};return Object(j.jsx)(u.Provider,{value:r,children:e.children})},O=(u.Consumer,n(26)),x=n(4),f=n(64),m=(n(83),n(6)),y=n.n(m),g=n(10),v=n(66).a.initializeApp({apiKey:"AIzaSyDjN_xR7YEwoGR9wED9erh6KNFXKPeyyX4",authDomain:"td-app3.firebaseapp.com",databaseURL:"https://td-app3-default-rtdb.firebaseio.com",projectId:"td-app3",storageBucket:"td-app3.appspot.com",messagingSenderId:"762295805235",appId:"1:762295805235:web:eb385cf97c6f78767dca46",measurementId:"G-8T7374G5QP"}).firestore(),w=function(e){var t=e.contact,n=Object(c.useContext)(u),r=n.state,s=n.dispatch,a=Object(c.useState)({}),o=Object(i.a)(a,2),l=o[0],d=o[1],b=Object(c.useState)(0),h=Object(i.a)(b,2),p=h[0],f=h[1],m=Object(c.useState)({}),w=Object(i.a)(m,2),_=w[0],k=w[1];Object(c.useEffect)((function(){l.message_id!==_.message_id&&f(p+1)}),[l]);var N=Object(O.e)(),C=t.avatar||"https://media.istockphoto.com/photos/businessman-silhouette-as-avatar-or-default-profile-picture-picture-id476085198?k=6&m=476085198&s=612x612&w=0&h=5cDQxXHFzgyz8qYeBQu2gCZq1_TN0z40e_8ayzne0X0=";Object(c.useRef)(null);Object(x.H)(Object(g.a)(y.a.mark((function e(){var n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(r.user.user_id,",").concat(t.user_id),c="".concat(t.user_id,",").concat(r.user.user_id),e.next=4,v.collection("messages").where("channel","in",[n,c]).orderBy("time","desc").limit(1).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),t.length>0&&(k(l),d(t[0]))}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)}))));return Object(j.jsxs)(x.m,{onClick:function(){return s({type:"setNoTabs",payload:!0}),s({type:"setChattingWith",payload:t}),void N.push("/chatpage")},children:[Object(j.jsx)(x.b,{slot:"start",children:Object(j.jsx)("img",{src:C,alt:"icon"})}),Object(j.jsxs)(x.n,{children:[Object(j.jsx)("h2",{children:t.name}),Object(j.jsx)("p",{children:l.message||"..."})]}),p>0&&Object(j.jsx)(x.c,{color:"success",slot:"end",children:p})]})},_=function(){var e=Object(c.useContext)(u),t=e.state;e.dispatch;return console.log("ttt state",t),Object(j.jsx)(x.q,{children:Object(j.jsx)(x.f,{className:"chat-screen",children:Object(j.jsx)(x.o,{children:t.user.contacts.map((function(e){return Object(j.jsx)(w,{contact:e},e.user_id)}))})})})},k=(n(88),function(e){var t=e.name;return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("strong",{children:t}),Object(j.jsxs)("p",{children:["Explore ",Object(j.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ionicframework.com/docs/components",children:"UI Components"})]})]})}),N=(n(89),function(){return Object(j.jsxs)(x.q,{children:[Object(j.jsx)(x.i,{children:Object(j.jsx)(x.y,{children:Object(j.jsx)(x.x,{children:"Tab 2"})})}),Object(j.jsxs)(x.f,{fullscreen:!0,children:[Object(j.jsx)(x.i,{collapse:"condense",children:Object(j.jsx)(x.y,{children:Object(j.jsx)(x.x,{size:"large",children:"Tab 2"})})}),Object(j.jsx)(k,{name:"Tab 2 page"})]})]})}),C=(n(90),function(){return Object(j.jsxs)(x.q,{children:[Object(j.jsx)(x.i,{children:Object(j.jsx)(x.y,{children:Object(j.jsx)(x.x,{children:"Tab 3"})})}),Object(j.jsxs)(x.f,{fullscreen:!0,children:[Object(j.jsx)(x.i,{collapse:"condense",children:Object(j.jsx)(x.y,{children:Object(j.jsx)(x.x,{size:"large",children:"Tab 3"})})}),Object(j.jsx)(k,{name:"Tab 3 page"})]})]})}),T=(n(62),function(){var e=Object(c.useState)(),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),a=Object(i.a)(s,2),o=a[0],l=void 0!==o&&o,d=a[1],b=Object(c.useContext)(u).dispatch,h=function(){var e=Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,v.collection("users").where("passcode","==",n).get();case 3:e.sent.forEach((function(e){(t=e.data()).id=e.id,console.log(t)})),console.log(t),b({type:"loadUser",payload:{user:t}}),d(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(x.q,{children:[Object(j.jsx)(x.i,{children:Object(j.jsx)(x.y,{className:"login-bar",children:Object(j.jsx)(x.x,{children:"Two-step Verification"})})}),Object(j.jsxs)(x.f,{children:[Object(j.jsx)("div",{className:"passcode-text",children:"Enter a four digit passcode which you'll be asked for when you register your phone number with WhatsApp:"}),Object(j.jsx)("div",{className:"passcode-input-section",children:Object(j.jsx)(x.m,{className:"passcode-input",children:Object(j.jsx)(x.l,{value:n,onIonChange:function(e){return r(e.detail.value)},clearInput:!0})})}),Object(j.jsx)(x.d,{className:"login-button",onClick:function(){return h()},children:"Login"}),Object(j.jsx)(x.p,{isOpen:l,onDidDismiss:function(){return d(!1)},message:"Please wait...",duration:5e3})]})]})}),S=(n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(23));var E={genRandom:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",c=e;c>0;--c)n+=t[Math.round(Math.random()*(t.length-1))];return n},getTime:function(e){var t=new Date(1e3*e),n=t.getHours(),c="0"+t.getMinutes();return n+":"+c.substr(-2)}},D=(n(102),function(e){var t=e.chat,n=Object(c.useContext)(u),r=n.state,s=(n.dispatch,E.getTime(t.time)),a="media"===t.type?"data:image/jpeg;base64,"+t.file_url:"",i={};return r.user.user_id===t.sent_by&&(i.backgroundColor="#dcf8c6",i.float="right"),Object(j.jsx)("div",{style:{clear:"both"},children:Object(j.jsxs)("div",{className:"chat-message-box",style:i,children:["media"===t.type&&Object(j.jsx)(x.k,{src:a}),t.message,Object(j.jsx)("div",{className:"message-time",children:s})]})})}),z=n(53),I=function(){var e=Object(c.useContext)(u),t=e.state,n=e.dispatch,r=Object(c.useState)(""),s=Object(i.a)(r,2),a=s[0],o=s[1],l=Object(c.useState)([]),d=Object(i.a)(l,2),b=d[0],h=d[1],p=Object(c.useRef)(null);Object(x.H)(Object(g.a)(y.a.mark((function e(){var n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.user.user_id,",").concat(t.chattingWith.user_id),c="".concat(t.chattingWith.user_id,",").concat(t.user.user_id),e.next=4,v.collection("messages").where("channel","in",[n,c]).orderBy("time").limit(100).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),h(t),console.log(t)}));case 4:p=e.sent;case 5:case"end":return e.stop()}}),e)})))),Object(x.I)((function(){n({type:"setNoTabs",payload:!1}),p()}));var O=function(){var e=Object(g.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.getPhoto({quality:90,allowEditing:!1,resultType:z.b.Base64});case 2:return t=e.sent,t.webPath,console.log(t),e.next=7,f("media",t.base64String);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(g.a)(y.a.mark((function e(){var n,c,r,s=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:"text",c=s.length>1?s[1]:void 0,!a&&"media"!==n){e.next=9;break}return r={message_id:E.genRandom(),sent_by:t.user.user_id,channel:"".concat(t.user.user_id,",").concat(t.chattingWith.user_id),type:n,message:a||"",file_url:c,time:+Date.now()},console.log("ttt mess",r),e.next=7,v.collection("messages").add(r);case 7:e.sent,o("");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(x.q,{children:[Object(j.jsx)(x.i,{children:Object(j.jsxs)(x.y,{className:"login-bar",children:[Object(j.jsx)(x.b,{slot:"start",style:{width:"40px",height:"40px",marginLeft:"10px"},children:Object(j.jsx)("img",{src:t.chattingWith.avatar,alt:"Profile"})}),Object(j.jsx)(x.x,{children:t.chattingWith.name})]})}),Object(j.jsx)(x.f,{className:"chat-page-content",children:b.map((function(e){return Object(j.jsx)(D,{chat:e},e.message_id)}))}),Object(j.jsx)(x.g,{children:Object(j.jsx)(x.y,{children:Object(j.jsx)(x.h,{children:Object(j.jsxs)(x.t,{children:[Object(j.jsx)(x.e,{children:Object(j.jsx)(x.h,{children:Object(j.jsxs)(x.t,{children:[Object(j.jsx)(x.e,{size:"2",children:Object(j.jsx)(x.j,{icon:S.h,size:"large"})}),Object(j.jsx)(x.e,{children:Object(j.jsx)(x.l,{value:a,placeholder:"Type a message",onIonChange:function(e){return o(e.detail.value)}})}),Object(j.jsx)(x.e,{size:"2",children:Object(j.jsx)(x.j,{icon:S.i,size:"large",className:"media-icon",onClick:function(){return O()}})})]})})}),Object(j.jsx)(x.e,{size:"2",children:Object(j.jsx)(x.d,{className:"chat-send-button",onClick:function(){return f("text","")},children:Object(j.jsx)(x.j,{icon:S.p,size:"large"})})})]})})})})]})},P=function(){var e=Object(c.useContext)(u),t=e.state;e.dispatch;return console.log("ttt111 ",t),Object(j.jsx)(x.a,{children:t.user?Object(j.jsx)(f.a,{children:Object(j.jsxs)(x.w,{children:[Object(j.jsxs)(x.s,{children:[Object(j.jsx)(O.b,{path:"/tab1",component:_,exact:!0}),Object(j.jsx)(O.b,{path:"/tab2",component:N,exact:!0}),Object(j.jsx)(O.b,{path:"/tab3",component:C}),Object(j.jsx)(O.b,{path:"/chatpage",component:I,exact:!0}),Object(j.jsx)(O.b,{path:"/",render:function(){return Object(j.jsx)(O.a,{to:"/tab1"})},exact:!0})]}),t.noTabs?Object(j.jsx)(x.u,{}):Object(j.jsxs)(x.u,{slot:"top",className:"menu-bar",children:[Object(j.jsx)(x.v,{tab:"tab1",href:"/tab1",className:"tabButton",children:Object(j.jsx)(x.n,{children:"CHATS"})}),Object(j.jsx)(x.v,{tab:"tab2",href:"/tab2",className:"tabButton",children:Object(j.jsx)(x.n,{children:"STATUS"})}),Object(j.jsx)(x.v,{tab:"tab3",href:"/tab3",className:"tabButton",children:Object(j.jsx)(x.n,{children:"CALLS"})})]})]})}):Object(j.jsx)(T,{})})};var W=function(){return Object(j.jsx)(p,{children:Object(j.jsx)(P,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=function(e){e&&e instanceof Function&&n.e(69).then(n.bind(null,175)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},U=n(68);a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(W,{})}),document.getElementById("root")),Object(U.a)(window),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),B()},62:function(e,t,n){},76:function(e,t,n){var c={"./ion-action-sheet.entry.js":[106,7],"./ion-alert.entry.js":[107,8],"./ion-app_8.entry.js":[108,9],"./ion-avatar_3.entry.js":[109,19],"./ion-back-button.entry.js":[110,20],"./ion-backdrop.entry.js":[111,46],"./ion-button_2.entry.js":[112,21],"./ion-card_5.entry.js":[113,22],"./ion-checkbox.entry.js":[114,23],"./ion-chip.entry.js":[115,24],"./ion-col_3.entry.js":[116,47],"./ion-datetime_3.entry.js":[117,12],"./ion-fab_3.entry.js":[118,25],"./ion-img.entry.js":[119,48],"./ion-infinite-scroll_2.entry.js":[120,49],"./ion-input.entry.js":[121,26],"./ion-item-option_3.entry.js":[122,27],"./ion-item_8.entry.js":[123,28],"./ion-loading.entry.js":[124,29],"./ion-menu_3.entry.js":[125,30],"./ion-modal.entry.js":[126,10],"./ion-nav_2.entry.js":[127,16],"./ion-popover.entry.js":[128,11],"./ion-progress-bar.entry.js":[129,31],"./ion-radio_2.entry.js":[130,32],"./ion-range.entry.js":[131,33],"./ion-refresher_2.entry.js":[132,13],"./ion-reorder_2.entry.js":[133,18],"./ion-ripple-effect.entry.js":[134,50],"./ion-route_4.entry.js":[135,34],"./ion-searchbar.entry.js":[136,35],"./ion-segment_2.entry.js":[137,36],"./ion-select_3.entry.js":[138,37],"./ion-slide_2.entry.js":[139,51],"./ion-spinner.entry.js":[140,15],"./ion-split-pane.entry.js":[141,52],"./ion-tab-bar_2.entry.js":[142,38],"./ion-tab_2.entry.js":[143,17],"./ion-text.entry.js":[144,39],"./ion-textarea.entry.js":[145,40],"./ion-toast.entry.js":[146,41],"./ion-toggle.entry.js":[147,14],"./ion-virtual-scroll.entry.js":[148,53]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=76,e.exports=r},78:function(e,t,n){var c={"./ion-icon.entry.js":[149,68]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=78,e.exports=r},83:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){}},[[104,3,6]]]);
//# sourceMappingURL=main.666af571.chunk.js.map